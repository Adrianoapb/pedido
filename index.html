<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Para Voc√™</title>

  <style>
    :root{
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.75);
      --accent: #ff4d8d;
    }

    body{
      margin:0;
      background:#000;
      height:100vh;
      overflow:hidden;
      font-family: Arial, sans-serif;
      color: var(--txt);
    }

    /* ‚ù§Ô∏è CORA√á√ïES (aparecem s√≥ no in√≠cio) */
    .heart{
      position:fixed;
      bottom:-20px;
      width:12px;
      height:12px;
      background: rgba(255,77,141,.35);
      transform: rotate(45deg);
      animation: floatUp linear infinite;
      z-index:1;
      pointer-events:none;
    }
    .heart::before,
    .heart::after{
      content:"";
      position:absolute;
      width:12px;
      height:12px;
      background: rgba(255,77,141,.35);
      border-radius:50%;
    }
    .heart::before{ left:-6px; top:0; }
    .heart::after{ left:0; top:-6px; }

    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:0; }
      10%{ opacity:.8; }
      to{ transform: translateY(-120vh) rotate(45deg); opacity:0; }
    }

    /* ABERTURA */
    #start{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      cursor:pointer;
      background:
        radial-gradient(800px 500px at 50% 45%, rgba(255,77,141,.18), transparent 60%),
        #000;
      transition: opacity .6s ease, transform .6s ease;
      z-index:10;
    }
    #start.hide{
      opacity:0;
      transform: scale(1.02);
      pointer-events:none;
    }

    .card{
      max-width:560px;
      padding:22px 18px;
      border-radius:18px;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(6px);
      box-shadow: 0 14px 40px rgba(0,0,0,.6);
      z-index:20;
      position:relative;
    }

    .title{ font-size:22px; margin:0 0 8px; }
    .subtitle{ font-size:15px; color: var(--muted); margin:0 0 10px; }

    .date{
      display:inline-block;
      margin:8px 0 10px;
      padding:8px 14px;
      border-radius:999px;
      background: rgba(255,77,141,.14);
      border:1px solid rgba(255,77,141,.4);
      font-weight:800;
      letter-spacing:.6px;
      opacity:0;
      transform: translateY(8px);
      filter: blur(1px);
      transition: all .9s ease;
    }
    .date.show{
      opacity:1;
      transform: translateY(0);
      filter:none;
    }

    .btn{
      margin-top:14px;
      padding:12px 18px;
      border-radius:999px;
      background: rgba(255,77,141,.18);
      border:1px solid rgba(255,77,141,.45);
      font-weight:700;
      display:inline-block;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      color: rgba(255,255,255,.7);
    }

    /* V√çDEO */
    video{
      width:100vw;
      height:100vh;
      object-fit:contain;
      background:#000;
      display:none;
      opacity:0;
      transition: opacity .4s ease;
      z-index:5;
    }
    video.show{ opacity:1; }

    /* FINAL */
    #end{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      background:
        radial-gradient(800px 500px at 50% 45%, rgba(255,77,141,.18), transparent 60%),
        #000;
      opacity:0;
      pointer-events:none;
      transition: opacity 1s ease;
      z-index:30;
    }
    #end.show{
      opacity:1;
      pointer-events:auto;
    }

    .exitBtn{
      margin-top:18px;
      display:inline-block;
      padding:12px 18px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.22);
      color: var(--txt);
      font-weight:700;
      cursor:pointer;
      user-select:none;
    }

    @media (max-width:420px){
      .title{ font-size:20px; }
    }
  </style>
</head>

<body>

<!-- ABERTURA -->
<div id="start">
  <div class="card">
    <p class="title">Para voc√™, Thamires üíñ</p>
    <p class="subtitle">Um pequeno resumo do in√≠cio de tudo.</p>

    <div id="date" class="date">12/12/2025</div>

    <div class="btn">
      <span id="btnText">Toque aqui para come√ßar ‚ñ∂</span>
    </div>

    <div class="hint">Coloque o fone üéß e aumente um pouquinho o som.</div>
  </div>
</div>

<!-- V√çDEO (sem controles) -->
<video id="video" playsinline preload="auto">
  <source src="./video.mp4" type="video/mp4">
</video>

<!-- FINAL -->
<div id="end">
  <div class="card">
    <p class="title">Desde 12/12/2025</p>
    <p style="color:rgba(255,255,255,.85);margin:0">
      eu tenho certeza de uma coisa:<br><br>
      √© com voc√™ que eu quero continuar.<br><br>
      Eu te amo, Thamires. üíõ
    </p>

    <div id="exit" class="exitBtn">Toque para sair ‚ú®</div>
  </div>
</div>

<script>
  const start = document.getElementById("start");
  const video = document.getElementById("video");
  const dateEl = document.getElementById("date");
  const btnText = document.getElementById("btnText");
  const end = document.getElementById("end");
  const exitBtn = document.getElementById("exit");

  let stage = 0;
  let audioCtx = null;

  /* ‚ù§Ô∏è CORA√á√ïES: sobem por pouco tempo */
  let heartsInterval = null;
  const HEARTS_DURATION_MS = 6000; // <- tempo que os cora√ß√µes ficam (6s)

  function createHeart(){
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.animationDuration = (6 + Math.random() * 4) + "s";
    heart.style.transform = "rotate(45deg) scale(" + (0.55 + Math.random() * 0.9) + ")";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 11000);
  }

  function startHearts(){
    if (heartsInterval) return;
    heartsInterval = setInterval(createHeart, 320);

    // para criar um "burst" inicial
    for (let i = 0; i < 10; i++) setTimeout(createHeart, i * 120);

    setTimeout(stopHearts, HEARTS_DURATION_MS);
  }

  function stopHearts(){
    if (!heartsInterval) return;
    clearInterval(heartsInterval);
    heartsInterval = null;

    // remove rapidamente o que ainda estiver na tela
    document.querySelectorAll(".heart").forEach(h => h.remove());
  }

  startHearts(); // inicia ao abrir a p√°gina

  function playSoftSound(){
    try{
      if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      const t = audioCtx.currentTime;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      osc.type = "sine";
      osc.frequency.setValueAtTime(660, t);
      osc.frequency.exponentialRampToValueAtTime(520, t + 0.12);

      gain.gain.setValueAtTime(0.001, t);
      gain.gain.exponentialRampToValueAtTime(0.08, t + 0.02);
      gain.gain.exponentialRampToValueAtTime(0.001, t + 0.18);

      osc.connect(gain);
      gain.connect(audioCtx.destination);

      osc.start(t);
      osc.stop(t + 0.2);
    }catch(e){}
  }

  async function startVideo(){
    // garante que cora√ß√µes parem ao iniciar o v√≠deo
    stopHearts();

    start.classList.add("hide");
    setTimeout(()=> start.style.display="none",600);

    video.style.display="block";
    requestAnimationFrame(()=> video.classList.add("show"));

    try{ await video.play(); }catch(e){}

    // üé¨ Tela cheia
    if (video.requestFullscreen) {
      video.requestFullscreen().catch(()=>{});
    } else if (video.webkitEnterFullscreen) {
      video.webkitEnterFullscreen(); // iOS Safari
    } else if (video.webkitRequestFullscreen) {
      video.webkitRequestFullscreen();
    }
  }

  function handleStart(){
    if(stage === 0){
      playSoftSound();
      dateEl.classList.add("show");
      btnText.textContent = "Agora‚Ä¶ vamos lembrar ‚ñ∂";
      stage = 1;
      return;
    }
    if(stage === 1){
      stage = 2;
      startVideo();
    }
  }

  start.addEventListener("click", handleStart);

  // fim do v√≠deo => some o player e aparece a frase final
  video.addEventListener("ended", ()=>{
    video.classList.remove("show");

    // sai do fullscreen se poss√≠vel
    if (document.fullscreenElement) {
      document.exitFullscreen().catch(()=>{});
    }

    setTimeout(()=>{
      video.style.display="none";
      end.classList.add("show");
    }, 500);
  });

  // "Toque para sair" => reinicia a homenagem (ou voc√™ pode trocar para fechar aba)
  exitBtn.addEventListener("click", ()=>{
    // op√ß√£o segura: recarrega a p√°gina e volta pro in√≠cio
    window.location.reload();
  });
</script>

</body>
</html>
