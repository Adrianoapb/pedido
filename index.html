<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Para Voc√™</title>

  <style>
    :root{
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.75);
      --accent: #ff4d8d;
    }

    body{
      margin:0;
      background:#000;
      height:100vh;
      overflow:hidden;
      font-family: Arial, sans-serif;
      color: var(--txt);
    }

    /* ‚ù§Ô∏è CORA√á√ïES (tempo curto) */
    .heart{
      position:fixed;
      bottom:-20px;
      width:12px;
      height:12px;
      background: rgba(255,77,141,.35);
      transform: rotate(45deg);
      animation: floatUp linear infinite;
      z-index:1;
      pointer-events:none;
    }
    .heart::before,
    .heart::after{
      content:"";
      position:absolute;
      width:12px;
      height:12px;
      background: rgba(255,77,141,.35);
      border-radius:50%;
    }
    .heart::before{ left:-6px; top:0; }
    .heart::after{ left:0; top:-6px; }

    @keyframes floatUp{
      from{ transform: translateY(0) rotate(45deg); opacity:0; }
      10%{ opacity:.8; }
      to{ transform: translateY(-120vh) rotate(45deg); opacity:0; }
    }

    /* ü¶ã BORBOLETAS */
    .butterflies{
      display:flex;
      justify-content:center;
      gap:16px;
      margin:10px 0;
      opacity:0;
      transform: translateY(8px);
      filter: blur(1px);
      transition: opacity .9s ease, transform .9s ease, filter .9s ease;
    }
    .butterflies.show{
      opacity:1;
      transform: translateY(0);
      filter:none;
    }

    .butterfly{
      font-size:28px;
      animation: flutter 1.6s ease-in-out infinite;
      display:inline-block;
      transform-origin:center;
    }
    .butterfly:nth-child(2){ animation-delay:.2s; }
    .butterfly:nth-child(3){ animation-delay:.4s; }

    @keyframes flutter{
      0%,100%{ transform: translateY(0) rotate(0deg); }
      50%{ transform: translateY(-6px) rotate(6deg); }
    }

    /* ‚ú® Virar luz e sumir */
    .butterflies.light-away .butterfly{
      animation: lightAway 0.95s ease-out forwards;
      filter: drop-shadow(0 0 0 rgba(255,255,255,0));
    }
    .butterflies.light-away .butterfly:nth-child(1){ --dx:-10px; --dy:-10px; }
    .butterflies.light-away .butterfly:nth-child(2){ --dx:  0px; --dy:-14px; }
    .butterflies.light-away .butterfly:nth-child(3){ --dx: 10px; --dy:-10px; }

    @keyframes lightAway{
      0%{
        opacity:1;
        transform: translate(0,0) scale(1);
        filter: drop-shadow(0 0 0 rgba(255,255,255,0));
      }
      45%{
        opacity:1;
        transform: translate(var(--dx), var(--dy)) scale(1.15);
        filter:
          drop-shadow(0 0 10px rgba(255,255,255,.55))
          drop-shadow(0 0 22px rgba(255,77,141,.45));
      }
      100%{
        opacity:0;
        transform: translate(calc(var(--dx) * 2), calc(var(--dy) * 2)) scale(1.6);
        filter:
          drop-shadow(0 0 28px rgba(255,255,255,.10))
          drop-shadow(0 0 40px rgba(255,77,141,.10));
      }
    }

    /* ABERTURA */
    #start{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      cursor:pointer;
      background:
        radial-gradient(800px 500px at 50% 45%, rgba(255,77,141,.18), transparent 60%),
        #000;
      transition: opacity .6s ease, transform .6s ease;
      z-index:10;
    }
    #start.hide{
      opacity:0;
      transform: scale(1.02);
      pointer-events:none;
    }

    .card{
      max-width:560px;
      padding:22px 18px;
      border-radius:18px;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(6px);
      box-shadow: 0 14px 40px rgba(0,0,0,.6);
      z-index:20;
    }

    .title{ font-size:22px; margin:0 0 8px; }
    .subtitle{ font-size:15px; color: var(--muted); margin:0 0 6px; }

    .btn{
      margin-top:14px;
      padding:12px 18px;
      border-radius:999px;
      background: rgba(255,77,141,.18);
      border:1px solid rgba(255,77,141,.45);
      font-weight:700;
      display:inline-block;
    }

    .hint{
      margin-top:10px;
      font-size:13px;
      color: rgba(255,255,255,.7);
    }

    /* V√çDEO */
    video{
      width:100vw;
      height:100vh;
      object-fit:contain;
      background:#000;
      display:none;
      opacity:0;
      transition: opacity .4s ease;
      z-index:5;
    }
    video.show{ opacity:1; }

    /* FINAL */
    #end{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:24px;
      background:
        radial-gradient(800px 500px at 50% 45%, rgba(255,77,141,.18), transparent 60%),
        #000;
      opacity:0;
      pointer-events:none;
      transition: opacity 1s ease;
      z-index:30;
    }
    #end.show{
      opacity:1;
      pointer-events:auto;
    }

    .exitBtn{
      margin-top:18px;
      padding:12px 18px;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.22);
      font-weight:700;
      cursor:pointer;
      display:inline-block;
    }
  </style>
</head>

<body>

<!-- ABERTURA -->
<div id="start">
  <div class="card">
    <p class="title">Para voc√™, Thamires üíñ</p>
    <p class="subtitle">Um pequeno resumo do in√≠cio de tudo.</p>

    <!-- ü¶ã BORBOLETAS -->
    <div id="butterflies" class="butterflies">
      <span class="butterfly">ü¶ã</span>
      <span class="butterfly">ü¶ã</span>
      <span class="butterfly">ü¶ã</span>
    </div>

    <div class="btn">
      <span id="btnText">Toque aqui para come√ßar ‚ñ∂</span>
    </div>

    <div class="hint">Coloque o fone üéß e aumente um pouquinho o som.</div>
  </div>
</div>

<!-- V√çDEO -->
<video id="video" playsinline preload="auto">
  <source src="./video.mp4" type="video/mp4">
</video>

<!-- FINAL -->
<div id="end">
  <div class="card">
    <p class="title">Desde aquele come√ßo</p>
    <p style="color:rgba(255,255,255,.85);margin:0">
      eu tenho certeza de uma coisa:<br><br>
      √© com voc√™ que eu quero continuar.<br><br>
      Eu te amo, Thamires. üíõ
    </p>
    <div id="exit" class="exitBtn">Toque para sair ‚ú®</div>
  </div>
</div>

<script>
  const start = document.getElementById("start");
  const video = document.getElementById("video");
  const butterflies = document.getElementById("butterflies");
  const btnText = document.getElementById("btnText");
  const end = document.getElementById("end");
  const exitBtn = document.getElementById("exit");

  let stage = 0;
  let audioCtx = null;

  /* ‚ù§Ô∏è CORA√á√ïES ‚Äì poucos segundos */
  let hearts = setInterval(createHeart, 320);
  setTimeout(() => {
    clearInterval(hearts);
    document.querySelectorAll(".heart").forEach(h => h.remove());
  }, 5000);

  function createHeart(){
    const h = document.createElement("div");
    h.className = "heart";
    h.style.left = Math.random()*100 + "vw";
    h.style.animationDuration = (6 + Math.random()*4) + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),10000);
  }

  function playSoftSound(){
    try{
      if(!audioCtx){
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      }
      const t = audioCtx.currentTime;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();

      osc.type = "sine";
      osc.frequency.setValueAtTime(660, t);
      osc.frequency.exponentialRampToValueAtTime(520, t + 0.12);

      gain.gain.setValueAtTime(0.001, t);
      gain.gain.exponentialRampToValueAtTime(0.08, t + 0.02);
      gain.gain.exponentialRampToValueAtTime(0.001, t + 0.18);

      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start(t);
      osc.stop(t + 0.2);
    }catch(e){}
  }

  async function startVideo(){
    start.classList.add("hide");
    setTimeout(()=>start.style.display="none",600);

    video.style.display="block";
    requestAnimationFrame(()=>video.classList.add("show"));

    try{ await video.play(); }catch(e){}

    if(video.requestFullscreen){
      video.requestFullscreen().catch(()=>{});
    }else if(video.webkitEnterFullscreen){
      video.webkitEnterFullscreen();
    }
  }

  function handleStart(){
    if(stage===0){
      playSoftSound();
      butterflies.classList.add("show");
      btnText.textContent = "Agora‚Ä¶ vamos lembrar ‚ñ∂";
      stage = 1;
      return;
    }
    if(stage===1){
      // ‚ú® 2¬∫ toque: borboletas viram luz e somem
      butterflies.classList.add("light-away");

      stage = 2;

      // espera o brilho acontecer e ent√£o inicia o v√≠deo
      setTimeout(startVideo, 550);
    }
  }

  start.addEventListener("click", handleStart);

  video.addEventListener("ended", ()=>{
    if(document.fullscreenElement){
      document.exitFullscreen().catch(()=>{});
    }
    video.style.display="none";
    end.classList.add("show");
  });

  exitBtn.addEventListener("click", ()=>{
    window.location.reload();
  });
</script>

</body>
</html>
